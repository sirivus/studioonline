var domain = require("../domain"),query = require("../query");

describe("domain",function(){

    it("#init",function(done){
        setTimeout(function(){
            domain.exec("init",{},function(){
                done()
            })
        },100)

    })
    /*
    it("#create a article",function(done){
        domain.call("Navigation.createNode","id001",["Index node"],function(nodeId){
            console.log(nodeId)
            setTimeout(function(){
                done()
            },20)
        })
    })
     */
    it("#create a article",function(done){
        var ids = query.nav.getChildIds();
        var type = ids[0];
        domain.exec("create a article",{title:"kkkkkkkk a node.js's books",content:"hello ... ",type:type},function(err){
            console.log(err)
            done()
        })
    })

    /*
    it("remove a articles",function(done){
       var ids = query.nav.getChildIds();
       var type = ids[0];
       query.articleByType(type,0,function(rs){

           domain.exec("remove a article",{id:rs[0].id},function(){

               done()
           })

       })
    })
                       */
    it("find articles",function(done){
        var ids = query.nav.getChildIds();
        var type = ids[0];
        query.articleByType(type,0,function(rs){
            console.log(rs.length)
            done();
        })
    })


})